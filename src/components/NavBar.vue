<template>
  <div>
      <v-toolbar color="green" dark flat>


      <v-toolbar-title>Pentest toolkit</v-toolbar-title>

      <v-spacer></v-spacer>


      <v-menu
        left
        bottom
      >
        <template v-slot:activator="{ on, attrs }">
          <v-btn
            icon
            v-bind="attrs"
            v-on="on"
          >
            <v-icon>mdi-dots-vertical</v-icon>
          </v-btn>
        </template>

        <v-list>
          <v-list-item
          @click="logout"
          >
            <v-list-item-title>Выйти</v-list-item-title>

          </v-list-item>
        </v-list>
      </v-menu>

      <template v-slot:extension>
        <v-tabs   v-model="activeTab"  show-arrows>
   <v-tab v-for="tab in tabs" :key="tab.id" :to="tab.to">
    {{ tab.name }}
  </v-tab>
</v-tabs >

<v-tabs-items  v-model="activeTab" @change="updateRouter($event)">
  <v-tab-item v-for="tab in tabs" :key="tab.id" :value="tab.to">
  </v-tab-item>
</v-tabs-items>

      </template>
    </v-toolbar>
</div>

</template>

<script>
export default {
  data: () => ({
    activeTab: '',
  }),
  computed: {
    tabs() {
      return [
        { id: 1, name: 'Dashboard', to: this.getTabPath('Dashboard') },
        { id: 2, name: 'Projects', to: this.getTabPath('projects') },
        { id: 3, name: 'Domains', to: this.getTabPath('domains') },
        { id:4 , name: "Ips", to: this.getTabPath("ips")},
        { id:5, name: "Services", to: this.getTabPath("services")},
        { id: 6, name: "Subnets", to: this.getTabPath("subnets")}
      ]
    },
  },
  methods: {
    getTabPath(name) {
      // Get the path without losing params. Usefull e.g. if you have a :locale in your url:
      return this.$router.resolve({ name, params: this.$route.params }).href
    },
    updateRouter(path) {
      // Gets called upon swipe.
      this.$router.push(path)
    },

    async logout() {
      console.log('logout')
      await this.$store.dispatch('logout')
      this.$router.push({ name: 'Login' })
    },
  },
}
</script>
