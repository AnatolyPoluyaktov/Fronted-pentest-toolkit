<template>
    <div>
      <v-row
        justify="center"
      >

        <v-dialog
          v-model="dialog"
          fullscreen
          hide-overlay
          transition="dialog-bottom-transition"
          scrollable
        >
          <v-card tile>
            <v-toolbar
            class="flex-grow-0"
              flat
              dark
              color="primary"
            >
              <v-btn
                icon
                dark
                @click="$emit('close')"
              >
                <v-icon>mdi-close</v-icon>
              </v-btn>
              <v-toolbar-title>Domain Info: {{domain.name}}</v-toolbar-title>
              <v-spacer></v-spacer>


            </v-toolbar>

      <v-card-title>D</v-card-title>


    <v-card-subtitle class="pb-0">
      Number 10
    </v-card-subtitle>
            <v-card-text>


              <v-divider></v-divider>
              <v-list
                three-line
                subheader
              >

                <v-list-item>
                  <CardEntities :mydata="data_for_card" />

                </v-list-item>


              </v-list>

            </v-card-text>

            <div style="flex: 1 1 auto;"></div>
          </v-card>
        </v-dialog>


      </v-row>

    </div>
  </template>

  <script>
  import http from "@/http";
  import CardEntities from '../cards/CardEntities.vue';
    export default {
      components: {
        CardEntities
      },
      props:{
        dialog: {
          type: Boolean,
          default: false
        },
       domain_id: {
          type: Number,
          default: 1
        },
      },
      data () {
        return {

          loader: null,
          loading: false,
          widgets: false,

          domain: {},

          data_for_card: []
        }

      },

      methods: {
       async getProjectInfo() {

          let response = (await http.getItem("common/domains/", this.domain_id)).data;
          this.domain = response;
        },


        prepareDataForCard(){
          this.data_for_card = []
          this.data_for_card.push({
            title: 'Ips',
            data: this.domain.ips
          })
          this.data_for_card.push({
            title: 'Subdomains',
            data: this.domain.subdomains
          })



          console.log(this.data_for_card)



        }
      },
      loader(){

      },
      watch : {
        dialog(val) {
          if (val) {
            this.getProjectInfo()
          this.prepareDataForCard()
          }


        },

      },
    }
  </script>
